Описание API
============

Запросы между клиентом и сервером передаются в виде JSON-объекта.
Первая пара ключ:значение определяет тип метода.

Ниже перечислены все типы передаваемых данных.

Объект Type
-----------

В объекте Type передается тип метода.

.. list-table:: объект Type
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - type
      - dict
      - Yes
      - Уникальное имя метода из следующего списка: all_chat, all_messages, authentication, get_update, register_user, send_message, user_info


Объект Data
-----------

В объекте Data передается основной массив информации.

.. list-table:: объект Data
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - time
      - dict
      - No
      - Объект данных в виде массива типа dict
    * - chat
      - dict
      - No
      - Объект данных в виде массива типа dict
    * - message
      - dict
      - No
      - Объект данных в виде массива типа dict
    * - user
      - dict
      - No
      - Объект данных в виде массива типа dict
    * - meta
      - dict
      - No
      - Объект данных в виде массива типа dict


Объект Time
----------------

В объекте Time передается информация о времени.

.. list-table:: объект time
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - time
      - int
      - Yes
      - Время на сервере (в формате ...)


Объект Chat
----------------

В объекте Chat передается полная информация о чате (канале, группе).

.. list-table:: объект chat
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - id
      - int
      - Yes
      - Уникальный номер чата
    * - time
      - int
      - Yes
      - Время обновления чата
    * - type
      - str
      - Yes
      - Фиксированный тип чата: chat, channel, group
    * - title
      - str
      - Yes
      - Персональное имя чата (может быть не уникальным)
    * - info
      - str
      - No
      - Описание канала

Объект Message
-------------------

В объекте message передается информация о сообщении за период

.. list-table:: объект message
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - id
      - int
      - Yes
      - Уникальный номер сообщения
    * - text
      - str
      - Yes
      - Текст сообщения
    * - from_user
      - dict
      - Yes
      - Информация о пользователе который написал это сообщение
    * - time
      - int
      - Yes
      - Время когда сообщение было написано
    * - from_chat
      - dict
      - Yes
      - К какому чату принадлежит это сообщение
    * - file
      - dict
      - No
      - Файл прикреплённый к сообщению (аудио, видео, фото, документ)
    * - emoji
      - bytes
      - No
      - Тип емоджи (в виде файла)
    * - edited_message
      - dict
      - No
      - Информация было ли сообщение отредактировано после публикации
    * - reply_to
      - Any
      - No
      - Ссылка на цитируемое сообщение

Объект from_user
----------------

в объекте from_user передается информация о пользователе который написал сообщение

.. list-table:: объект from_user
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - id
      - int
      - Yes
      - Уникальный номер пользователя
    * - username
      - str
      - Yes
      - Имя пользователя


Объект from_chat
----------------

В объекте from_chat передается информация о id чата к которому принадлежит сообщение

.. list-table:: объект from_chat
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - id
      - int
      - Yes
      - Уникальный номер пользователя


Объект file
-----------

Объект file который содежит файлы, которые прикреплены к сообщению.

.. list-table:: объект Type
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - picture
      - bytes
      - No
      - Изображение
    * - video
      - bytes
      - No
      - Изображение
    * - audio
      - bytes
      - No
      - Изображение
    * - document
      - bytes
      - No
      - Изображение


Объект edited_message
---------------------

В объекте edited_message передается информация о том было ли исправлено сообщение и дату последнего редактирования.

.. list-table:: объект edited_message
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - time
      - int
      - Yes
      - время когда пользователь последний раз исправил сообщение
    * - status
      - bool
      - Yes
      - Статус сообщения (исправлено или нет)


Объект User
----------------

В объекте user передается информация о пользователе (настройки пользователя)

.. list-table:: объект Type
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - id
      - int
      - Yes
      - Уникальный номер пользователя
    * - bio
      - str
      - No
      - Текст сообщения
    * - avatar
      - bytes
      - No
      - Изображение пользователя
    * - password
      - str
      - Yes
      - Пароль пользователя
    * - login
      - str
      - Yes
      - Логин поьзователя
    * - is_bot
      - bool
      - Yes
      - Указывает на тип пользователя (бот или человек)
    * - auth_id
      - bytes
      - Yes
      - хэш пароля
    * - email
      - EmailStr
      - Yes
      - Контактная информация пользователя
    * - username
      - str
      - Yes
      - Имя пользователя (не уникальное)


Объект Errors
-------------

ааааа

.. list-table:: объект errors
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - id
      - int
      - Yes
      - Уникальный номер ошибки
    * - time
      - int
      - Yes
      - Время когда произошла ошибка
    * - status
      - str
      - Yes
      - Статус ошибки (в соответствии с таблицей кодов состояний HTTP-протокола)
    * - code
      - int
      - Yes
      - Код ошибки (в соответствии с таблицей кодов состояний HTTP-протокола)
    * - detail
      - str
      - Yes
      - Описание ошибки


Объект Jsonapi
--------------

В объекте jsonapi передается версия протокола.

.. list-table:: объект jsonapi
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - version
      - float
      - Yes
      - Версия протокола


Объект Meta
-----------

Объект meta зарезервирован

.. list-table:: объект meta
    :widths: 15 15 15 55
    :header-rows: 1

    * - Ключ
      - Тип
      - Обязательный
      - Описание
    * - meta
      - Any
      - No
      - Зарезервировано

